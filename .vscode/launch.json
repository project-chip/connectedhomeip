{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    "version": "0.2.0",
    "configurations": [
        {
            "name": "QRCode Tests",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/default/src/setup_payload/tests/TestQRCode",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "preLaunchTask": "Build QRCode Payload Tests",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "CHIP crypto Tests",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/default/src/crypto/tests/TestCrypto",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "preLaunchTask": "Build & Run Crypto Tests",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "CHIP openSSL Tests",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/build/default/src/crypto/tests/TestCryptoPAL",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "preLaunchTask": "Build openSSL crypto Tests",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "LightingApp (Linux)",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceFolder}/out/lighting-app/chip-lighting-app",
            "args": [],
            "stopAtEntry": false,
            "cwd": "${workspaceFolder}",
            "environment": [],
            "externalConsole": false,
            "MIMode": "gdb",
            "preLaunchTask": "Build Lighting App (Linux)",
            "setupCommands": [
                {
                    "description": "Enable pretty-printing for gdb",
                    "text": "-enable-pretty-printing",
                    "ignoreFailures": true
                }
            ]
        },
        {
            "name": "Shell Mbed Example Debug [remote]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/shell/mbed/build-${input:mbedTarget}/${input:mbedProfile}/chip-mbed-shell-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/shell/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "setupCommands": [
                {
                    "text": "-target-select remote host.docker.internal:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/shell/mbed/build-${input:mbedTarget}/${input:mbedProfile}/chip-mbed-shell-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb"
            }
        },
        {
            "name": "Shell Mbed Example Debug [local: nrf52840]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/shell/mbed/build-NRF52840_DK/${input:mbedProfile}/chip-mbed-shell-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/shell/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "setupCommands": [
                {
                    "text": "-target-select remote localhost:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/shell/mbed/build-NRF52840_DK/${input:mbedProfile}/chip-mbed-shell-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb",
                "debugServerPath": "pyocd-gdbserver",
                "debugServerArgs": "-t nrf52840 -O connect_mode=under-reset"
            }
        },
        {
            "name": "Shell Mbed Example Debug [local: stm32l475xg]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/shell/mbed/build-DISCO_L475VG_IOT01A/${input:mbedProfile}/chip-mbed-shell-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/shell/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "setupCommands": [
                {
                    "text": "-target-select remote localhost:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/shell/mbed/build-DISCO_L475VG_IOT01A/${input:mbedProfile}/chip-mbed-shell-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb",
                "debugServerPath": "pyocd-gdbserver",
                "debugServerArgs": "-t stm32l475xg -O connect_mode=under-reset -f 4000000"
            }
        },
        {
            "name": "Lock-app Mbed Example Debug [remote]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/lock-app/mbed/build-${input:mbedTarget}/${input:mbedProfile}/chip-mbed-lock-app-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/lock-app/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "setupCommands": [
                {
                    "text": "-target-select remote host.docker.internal:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/lock-app/mbed/build-${input:mbedTarget}/${input:mbedProfile}/chip-mbed-lock-app-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb"
            }
        },
        {
            "name": "Lock-app Mbed Example Debug [local: nrf52840]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/lock-app/mbed/build-NRF52840_DK/${input:mbedProfile}/chip-mbed-lock-app-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/lock-app/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "setupCommands": [
                {
                    "text": "-target-select remote localhost:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/lock-app/mbed/build-NRF52840_DK/${input:mbedProfile}/chip-mbed-lock-app-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb",
                "debugServerPath": "pyocd-gdbserver",
                "debugServerArgs": "-t nrf52840 -O connect_mode=under-reset"
            }
        },
        {
            "name": "Lock-app Mbed Example Debug [local: stm32l475xg]",
            "type": "cppdbg",
            "request": "launch",
            "program": "${workspaceRoot}/examples/lock-app/mbed/build-DISCO_L475VG_IOT01A/${input:mbedProfile}/chip-mbed-lock-app-example",
            "args": [],
            "stopAtEntry": true,
            "cwd": "${workspaceRoot}/examples/lock-app/mbed",
            "environment": [],
            "externalConsole": false,
            "debugServerArgs": "",
            "serverLaunchTimeout": 20000,
            "filterStderr": true,
            "filterStdout": false,
            "serverStarted": "GDB\\ server\\ started",
            "logging": {
                "moduleLoad": true,
                "trace": true,
                "engineLogging": true,
                "programOutput": true,
                "exceptions": true
            },
            "setupCommands": [
                {
                    "text": "-target-select remote localhost:3333",
                    "description": "connect to target",
                    "ignoreFailures": false
                },
                {
                    "text": "-file-exec-and-symbols ${workspaceRoot}/examples/lock-app/mbed/build-DISCO_L475VG_IOT01A/${input:mbedProfile}/chip-mbed-lock-app-example",
                    "description": "load file",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor reset\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor halt\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-interpreter-exec console \"monitor arm semihosting enable\"",
                    "ignoreFailures": false
                },
                {
                    "text": "-target-download",
                    "description": "flash target",
                    "ignoreFailures": false
                }
            ],
            "linux": {
                "MIMode": "gdb",
                "MIDebuggerPath": "${env:MBED_GCC_ARM_PATH}/arm-none-eabi-gdb",
                "debugServerPath": "pyocd-gdbserver",
                "debugServerArgs": "-t stm32l475xg -O connect_mode=under-reset -f 4000000"
            }
        },

        {
            "name": "Debug Mbed CY8CPROTO_062_4343W",
            "type": "cortex-debug",
            "request": "launch",
            "cwd": "${workspaceRoot}/examples/${input:mbedApp}/mbed",
            "executable": "./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example",
            "servertype": "openocd",
            "armToolchainPath": "${env:MBED_GCC_ARM_PATH}",
            "serverpath": "${env:OPENOCD_PATH}/bin/openocd",
            "searchDir": [
                "${workspaceRoot}/config/mbed/scripts",
                "${env:OPENOCD_PATH}/scripts"
            ],
            "configFiles": ["CY8CPROTO_062_4343W.tcl"],
            "overrideLaunchCommands": [
                "set mem inaccessible-by-default off",
                "-enable-pretty-printing",
                "set remotetimeout 15",
                "monitor program {./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example.hex}",
                "monitor reset run",
                "monitor sleep 200",
                "monitor psoc6 reset_halt sysresetreq"
            ],
            "numberOfProcessors": 2,
            "targetProcessor": 1, // Set to 0 for the CM0+, set to 1 for the CM4
            "postStartSessionCommands": ["monitor gdb_sync", "stepi"],
            "overrideRestartCommands": [
                "monitor reset init",
                "monitor reset run",
                "monitor sleep 200",
                "monitor psoc6 reset_halt sysresetreq"
            ],
            "postRestartSessionCommands": ["monitor gdb_sync", "stepi"],
            "runToMain": true, // if true, program will halt at main. Not used for a restart
            "showDevDebugOutput": false // When set to true, displays output of GDB.
        },

        {
            "name": "Debug Mbed CY8CPROTO_062_4343W [remote]",
            "type": "cortex-debug",
            "request": "launch",
            "cwd": "${workspaceRoot}/examples/${input:mbedApp}/mbed",
            "executable": "./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example",
            "servertype": "external",
            "armToolchainPath": "${env:MBED_GCC_ARM_PATH}",
            "serverpath": "${env:OPENOCD_PATH}/bin/openocd",
            "gdbTarget": "host.docker.internal:3334", //port 3333 for the CM0+, 3334 for the CM4
            "overrideLaunchCommands": [
                "set mem inaccessible-by-default off",
                "-enable-pretty-printing",
                "set remotetimeout 15",
                "monitor reset halt",
                "load ./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example.hex",
                "monitor reset run",
                "monitor sleep 200",
                "monitor psoc6 reset_halt sysresetreq"
            ],
            "postStartSessionCommands": ["monitor gdb_sync", "stepi"],
            "overrideRestartCommands": [
                "monitor reset init",
                "monitor reset run",
                "monitor sleep 200",
                "monitor psoc6 reset_halt sysresetreq"
            ],
            "postRestartSessionCommands": ["monitor gdb_sync", "stepi"],
            "runToMain": true, // if true, program will halt at main. Not used for a restart
            "showDevDebugOutput": false // When set to true, displays output of GDB.
        },

        {
            "name": "Flash Mbed CY8CPROTO_062_4343W",
            "type": "cortex-debug",
            "request": "launch",
            "cwd": "${workspaceRoot}/examples/${input:mbedApp}/mbed",
            "executable": "./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example",
            "servertype": "openocd",
            "armToolchainPath": "${env:MBED_GCC_ARM_PATH}",
            "serverpath": "${env:OPENOCD_PATH}/bin/openocd",
            "searchDir": [
                "${workspaceRoot}/config/mbed/scripts",
                "${env:OPENOCD_PATH}/scripts"
            ],
            "configFiles": ["CY8CPROTO_062_4343W.tcl"],
            "overrideLaunchCommands": [
                "monitor psoc6 sflash_restrictions 1",
                "monitor program {./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example.hex}",
                "monitor reset_config srst_only",
                "monitor reset run",
                "monitor psoc6.dap dpreg 0x04 0x00",
                "quit"
            ],
            "numberOfProcessors": 2,
            "targetProcessor": 1, // Set to 0 for the CM0+, set to 1 for the CM4
            "showDevDebugOutput": false // When set to true, displays output of GDB.
        },

        {
            "name": "Flash Mbed CY8CPROTO_062_4343W [remote]",
            "type": "cortex-debug",
            "request": "launch",
            "cwd": "${workspaceRoot}/examples/${input:mbedApp}/mbed",
            "executable": "./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example.hex",
            "servertype": "external",
            "armToolchainPath": "${env:MBED_GCC_ARM_PATH}",
            "serverpath": "${env:OPENOCD_PATH}/bin/openocd",
            "gdbTarget": "host.docker.internal:3334", //port 3333 for the CM0+, 3334 for the CM4
            "overrideLaunchCommands": [
                "monitor psoc6 sflash_restrictions 1",
                "monitor reset halt",
                "load ./build-CY8CPROTO_062_4343W/${input:mbedProfile}/chip-mbed-${input:mbedApp}-example.hex",
                "monitor reset_config srst_only",
                "monitor reset run",
                "monitor psoc6.dap dpreg 0x04 0x00",
                "quit"
            ],
            "showDevDebugOutput": false // When set to true, displays output of GDB.
        }
    ],
    "inputs": [
        {
            "type": "pickString",
            "id": "mbedTarget",
            "description": "What mbed target will be used?",
            "options": ["NRF52840_DK", "DISCO_L475VG_IOT01A"],
            "default": "NRF52840_DK"
        },
        {
            "type": "pickString",
            "id": "mbedProfile",
            "description": "What mbed profile do you want to use?",
            "options": ["debug", "develop"],
            "default": "develop"
        },
        {
            "type": "pickString",
            "id": "mbedApp",
            "description": "What mbed applciation do you want to use?",
            "options": ["shell", "lock-app"],
            "default": "shell"
        }
    ]
}
