<?xml version="1.0"?>
<!--
Copyright (c) 2021-2025 Project CHIP Authors

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<!--
XML generated by Alchemy; DO NOT EDIT.
Source: src/app_clusters/media/AccountLogin.adoc
Parameters: in-progress 
Git: 
-->
<configurator xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../zcl.xsd">
  <domain name="CHIP"/>
  <cluster>
    <domain>Media</domain>
    <name>Account Login</name>
    <code>0x050e</code>
    <define>ACCOUNT_LOGIN_CLUSTER</define>
    <client init="false" tick="false">true</client>
    <server init="false" tick="false">true</server>
    <globalAttribute side="either" code="0xFFFD" value="2"/>
    <!-- Revision   -->
    <description>This cluster provides commands that facilitate user account login on a Content App or a node. For example, a Content App running on a Video Player device, which is represented as an endpoint (see [TV Architecture]), can use this cluster to help make the user account on the Content App match the user account on the Client.</description>
    <command source="client" code="0x00" name="GetSetupPIN" isFabricScoped="true" response="GetSetupPINResponse" mustUseTimedInvoke="true" optional="false">
      <description>The purpose of this command is to determine if the active user account of the given Content App matches the active user account of a given Commissionee, and when it does, return a Setup PIN which can be used for password-authenticated session establishment (PASE) with the Commissionee.</description>
      <access op="invoke" role="administer"/>
      <arg id="0" name="TempAccountIdentifier" minLength="16" length="100" type="char_string"/>
    </command>

    <command source="client" code="0x02" name="Login" isFabricScoped="true" mustUseTimedInvoke="true" optional="false">
      <description>The purpose of this command is to allow the Content App to assume the user account of a given Commissionee by leveraging the Setup PIN input by the user during the commissioning process.</description>
      <access op="invoke" role="administer"/>
      <arg id="0" name="TempAccountIdentifier" minLength="16" length="100" type="char_string"/>
      <arg id="1" name="SetupPIN" minLength="8" type="char_string"/>
      <arg id="2" name="Node" type="node_id" optional="true"/>
    </command>

    <command source="client" code="0x03" name="Logout" isFabricScoped="true" mustUseTimedInvoke="true" optional="false">
      <description>The purpose of this command is to instruct the Content App to clear the current user account.</description>
      <arg id="0" name="Node" type="node_id" optional="true"/>
    </command>

    <command source="server" code="0x01" name="GetSetupPINResponse" optional="false" disableDefaultResponse="true" isFabricScoped="true">
      <description>This message is sent in response to the GetSetupPIN command, and contains the Setup PIN, or null when the account identified in the request does not match the active account of the running Content App.</description>
      <arg id="0" name="SetupPIN" type="char_string"/>
    </command>

    <event side="server" code="0x00" priority="critical" name="LoggedOut" optional="true" isFabricSensitive="true">
      <description>This event can be used by the Content App to indicate that the current user has logged out.</description>
      <field id="0" name="Node" type="node_id" optional="true"/>
      <access op="read" privilege="administer"/>
      <optionalConform/>
    </event>

  </cluster>
</configurator>
