# Copyright (c) 2021 Project CHIP Authors
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
# http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

name: 77.2.3. [TC-ACT-3.1] GLobal attributes with client as DUT

PICS:
    - ACT.C
    - ACT.C.AM-READ
    - ACT.C.AO-READ
    - ACT.C.AM-WRITE
    - ACT.C.AO-WRITE

config:
    nodeId: 0x12344321
    cluster: "Actions"
    endpoint: 0

tests:
    - label: "Wait for the device to be commissioned"
      cluster: "DelayCommands"
      command: "WaitForCommissioning"

    - label: "Read attribute: ActionList"
      wait: "readAttribute"
      attribute: "ActionList"

    - label: "Read attribute: EndpointLists"
      wait: "readAttribute"
      attribute: "EndpointLists"

    - label: "Read attribute: SetupURL"
      wait: "readAttribute"
      attribute: "SetupURL"

    - label:
          "Configure TH such that it implements mandatory and none of the
          optional attributes of the server-side of the cluster, and that it
          also reflects this in global attributes such as FeatureMap and
          AttributeList.Commission DUT to TH again"
      verification: |
          ./chip-tool actions read feature-map 1 1

          Verify none of the optional feature of the server-side of the cluster is listed  on TH(all-clusters-minnimal-app) Log

          [1666952667.233980][217377:217377] CHIP:IM: Received Read request
          [1666952667.234042][217377:217377] CHIP:DMG: ReadRequestMessage =
          [1666952667.234055][217377:217377] CHIP:DMG: {
          [1666952667.234066][217377:217377] CHIP:DMG:         AttributePathIBs =
          [1666952667.234080][217377:217377] CHIP:DMG:         [
          [1666952667.234092][217377:217377] CHIP:DMG:                 AttributePathIB =
          [1666952667.234106][217377:217377] CHIP:DMG:                 {
          [1666952667.234121][217377:217377] CHIP:DMG:                         Endpoint = 0x1,
          [1666952667.234135][217377:217377] CHIP:DMG:                         Cluster = 0x25,
          [1666952667.234150][217377:217377] CHIP:DMG:                         Attribute = 0x0000_FFFC,
          [1666952667.234162][217377:217377] CHIP:DMG:                 }
          [1666952667.234177][217377:217377] CHIP:DMG:
          [1666952667.234189][217377:217377] CHIP:DMG:         ],
          [1666952667.234205][217377:217377] CHIP:DMG:
          [1666952667.234218][217377:217377] CHIP:DMG:         isFabricFiltered = true,
          [1666952667.234230][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952667.234242][217377:217377] CHIP:DMG: },
          [1666952667.234299][217377:217377] CHIP:DMG: IM RH moving to [GeneratingReports]
          [1666952667.234351][217377:217377] CHIP:DMG: Building Reports for ReadHandler with LastReportGeneration = 0 DirtyGeneration = 0
          [1666952667.234366][217377:217377] CHIP:DMG: <RE:Run> Cluster 25, Attribute fffc is dirty
          [1666952667.234378][217377:217377] CHIP:DMG: Reading attribute: Cluster=0x0000_0025 Endpoint=1 AttributeId=0x0000_FFFC (expanded=0)
          [1666952667.234396][217377:217377] CHIP:DMG: AccessControl: checking f=1 a=c s=0x000000000001B669 t= c=0x0000_0025 e=1 p=v
          [1666952667.234416][217377:217377] CHIP:DMG: AccessControl: allowed
          [1666952667.234450][217377:217377] CHIP:DMG: <RE> Sending report (payload has 37 bytes)...
          [1666952667.234672][217377:217377] CHIP:EM: <<< [E:30993r M:147872011 (Ack:47982410)] (S) Msg TX to 1:000000000001B669 [AE59] --- Type 0001:05 (IM:ReportData)
          [1666952667.234702][217377:217377] CHIP:IN: (S) Sending msg 147872011 on secure session with LSID: 63117
          [1666952667.234980][217377:217377] CHIP:DMG: >> to UDP:[fe80::485c:bace:6107:3682%wlp3s0]:60986 | 147872011 | [Interaction Model  (1) / Report Data (0x05) / Session = 46893 / Exchange = 30993]
          [1666952667.235009][217377:217377] CHIP:DMG: Header Flags =
          [1666952667.235021][217377:217377] CHIP:DMG: {
          [1666952667.235046][217377:217377] CHIP:DMG:     Exchange (0x06) =
          [1666952667.235058][217377:217377] CHIP:DMG:     {
          [1666952667.235072][217377:217377] CHIP:DMG:         AckMsg = 47982410
          [1666952667.235084][217377:217377] CHIP:DMG:         NeedsAck = true
          [1666952667.235127][217377:217377] CHIP:DMG:     }
          [1666952667.235147][217377:217377] CHIP:DMG: }
          [1666952667.235158][217377:217377] CHIP:DMG:
          [1666952667.235175][217377:217377] CHIP:DMG: Encrypted Payload (71 bytes) =
          [1666952667.235186][217377:217377] CHIP:DMG: {
          [1666952667.235197][217377:217377] CHIP:DMG:     data = 002db7000b59d0088ab820a8595145a1757b47b8f77026a7a93316c7d5ad7381b9aa5cc8f40b5855924b4832512700a6d52a6435b0ba5340e5cb92b95b512bfae5b4d6393b0a9f
          [1666952667.235211][217377:217377] CHIP:DMG:     buffer_ptr = 94384713812592
          [1666952667.235222][217377:217377] CHIP:DMG: }
          [1666952667.235233][217377:217377] CHIP:DMG:
          [1666952667.235262][217377:217377] CHIP:DMG: Decrypted Payload (37 bytes) =
          [1666952667.235274][217377:217377] CHIP:DMG: {
          [1666952667.235285][217377:217377] CHIP:DMG:     data = 1536011535012600e0b2edc537012402012403252504fcff18240200181818290424ff0118
          [1666952667.235297][217377:217377] CHIP:DMG: }
          [1666952667.235308][217377:217377] CHIP:DMG:
          [1666952667.235365][217377:217377] CHIP:DMG: ReportDataMessage =
          [1666952667.235379][217377:217377] CHIP:DMG: {
          [1666952667.235391][217377:217377] CHIP:DMG:         AttributeReportIBs =
          [1666952667.235411][217377:217377] CHIP:DMG:         [
          [1666952667.235423][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952667.235442][217377:217377] CHIP:DMG:                 {
          [1666952667.235455][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952667.235471][217377:217377] CHIP:DMG:                         {
          [1666952667.235486][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952667.235499][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952667.235514][217377:217377] CHIP:DMG:                                 {
          [1666952667.235529][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952667.235545][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952667.235564][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFC,
          [1666952667.235580][217377:217377] CHIP:DMG:                                 }
          [1666952667.235598][217377:217377] CHIP:DMG:
          [1666952667.235614][217377:217377] CHIP:DMG:                                 Data = 0,
          [1666952667.235630][217377:217377] CHIP:DMG:                         },
          [1666952667.235647][217377:217377] CHIP:DMG:
          [1666952667.235659][217377:217377] CHIP:DMG:                 },
          [1666952667.235675][217377:217377] CHIP:DMG:
          [1666952667.235687][217377:217377] CHIP:DMG:         ],
          [1666952667.235706][217377:217377] CHIP:DMG:
          [1666952667.235719][217377:217377] CHIP:DMG:         SuppressResponse = true,
          [1666952667.235732][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952667.235744][217377:217377] CHIP:DMG: }



          ./chip-tool actions  read  attribute-list 1 1

          Verify attribute-list attribute contains 7 entries on TH(all-clusters-minimal-app)

          [1666952338.541227][217377:217377] CHIP:DMG: ReportDataMessage =
          [1666952338.541262][217377:217377] CHIP:DMG: {
          [1666952338.541289][217377:217377] CHIP:DMG:         AttributeReportIBs =
          [1666952338.541330][217377:217377] CHIP:DMG:         [
          [1666952338.541352][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.541390][217377:217377] CHIP:DMG:                 {
          [1666952338.541412][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.541442][217377:217377] CHIP:DMG:                         {
          [1666952338.541470][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.541502][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.541532][217377:217377] CHIP:DMG:                                 {
          [1666952338.541563][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.541595][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.541629][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.541659][217377:217377] CHIP:DMG:                                 }
          [1666952338.541693][217377:217377] CHIP:DMG:
          [1666952338.541720][217377:217377] CHIP:DMG:                                 Data = [
          [1666952338.541748][217377:217377] CHIP:DMG:
          [1666952338.541784][217377:217377] CHIP:DMG:                                 ],
          [1666952338.541812][217377:217377] CHIP:DMG:                         },
          [1666952338.541847][217377:217377] CHIP:DMG:
          [1666952338.541871][217377:217377] CHIP:DMG:                 },
          [1666952338.541916][217377:217377] CHIP:DMG:
          [1666952338.541948][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.541990][217377:217377] CHIP:DMG:                 {
          [1666952338.542013][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.542043][217377:217377] CHIP:DMG:                         {
          [1666952338.542068][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.542096][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.542125][217377:217377] CHIP:DMG:                                 {
          [1666952338.542153][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.542186][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.542225][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.542256][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.542286][217377:217377] CHIP:DMG:                                 }
          [1666952338.542321][217377:217377] CHIP:DMG:
          [1666952338.542353][217377:217377] CHIP:DMG:                                 Data = 0,
          [1666952338.542376][217377:217377] CHIP:DMG:                         },
          [1666952338.542413][217377:217377] CHIP:DMG:
          [1666952338.542435][217377:217377] CHIP:DMG:                 },
          [1666952338.542482][217377:217377] CHIP:DMG:
          [1666952338.542503][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.542540][217377:217377] CHIP:DMG:                 {
          [1666952338.542562][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.542590][217377:217377] CHIP:DMG:                         {
          [1666952338.542617][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.542641][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.542673][217377:217377] CHIP:DMG:                                 {
          [1666952338.542700][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.542733][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.542763][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.542793][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.542826][217377:217377] CHIP:DMG:                                 }
          [1666952338.542862][217377:217377] CHIP:DMG:
          [1666952338.542890][217377:217377] CHIP:DMG:                                 Data = 1,
          [1666952338.542912][217377:217377] CHIP:DMG:                         },
          [1666952338.542950][217377:217377] CHIP:DMG:
          [1666952338.542971][217377:217377] CHIP:DMG:                 },
          [1666952338.543018][217377:217377] CHIP:DMG:
          [1666952338.543039][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.543076][217377:217377] CHIP:DMG:                 {
          [1666952338.543128][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.543161][217377:217377] CHIP:DMG:                         {
          [1666952338.543187][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.543218][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.543250][217377:217377] CHIP:DMG:                                 {
          [1666952338.543277][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.543311][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.543346][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.543381][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.543410][217377:217377] CHIP:DMG:                                 }
          [1666952338.543444][217377:217377] CHIP:DMG:
          [1666952338.543473][217377:217377] CHIP:DMG:                                 Data = 65528,
          [1666952338.543499][217377:217377] CHIP:DMG:                         },
          [1666952338.543534][217377:217377] CHIP:DMG:
          [1666952338.543556][217377:217377] CHIP:DMG:                 },
          [1666952338.543603][217377:217377] CHIP:DMG:
          [1666952338.543624][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.543666][217377:217377] CHIP:DMG:                 {
          [1666952338.543688][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.543716][217377:217377] CHIP:DMG:                         {
          [1666952338.543743][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.543767][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.543797][217377:217377] CHIP:DMG:                                 {
          [1666952338.543826][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.543859][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.543893][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.543929][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.543955][217377:217377] CHIP:DMG:                                 }
          [1666952338.543990][217377:217377] CHIP:DMG:
          [1666952338.544019][217377:217377] CHIP:DMG:                                 Data = 65529,
          [1666952338.544042][217377:217377] CHIP:DMG:                         },
          [1666952338.544077][217377:217377] CHIP:DMG:
          [1666952338.544098][217377:217377] CHIP:DMG:                 },
          [1666952338.544145][217377:217377] CHIP:DMG:
          [1666952338.544166][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.544204][217377:217377] CHIP:DMG:                 {
          [1666952338.544225][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.544255][217377:217377] CHIP:DMG:                         {
          [1666952338.544283][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.544311][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.544339][217377:217377] CHIP:DMG:                                 {
          [1666952338.544376][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.544405][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.544439][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.544474][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.544498][217377:217377] CHIP:DMG:                                 }
          [1666952338.544532][217377:217377] CHIP:DMG:
          [1666952338.544566][217377:217377] CHIP:DMG:                                 Data = 65531,
          [1666952338.544592][217377:217377] CHIP:DMG:                         },
          [1666952338.544629][217377:217377] CHIP:DMG:
          [1666952338.544651][217377:217377] CHIP:DMG:                 },
          [1666952338.544702][217377:217377] CHIP:DMG:
          [1666952338.544717][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.544743][217377:217377] CHIP:DMG:                 {
          [1666952338.544758][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.544777][217377:217377] CHIP:DMG:                         {
          [1666952338.544796][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.544814][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.544834][217377:217377] CHIP:DMG:                                 {
          [1666952338.544856][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.544878][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.544901][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.544922][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.544945][217377:217377] CHIP:DMG:                                 }
          [1666952338.544971][217377:217377] CHIP:DMG:
          [1666952338.544991][217377:217377] CHIP:DMG:                                 Data = 65532,
          [1666952338.545007][217377:217377] CHIP:DMG:                         },
          [1666952338.545032][217377:217377] CHIP:DMG:
          [1666952338.545047][217377:217377] CHIP:DMG:                 },
          [1666952338.545081][217377:217377] CHIP:DMG:
          [1666952338.545095][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952338.545122][217377:217377] CHIP:DMG:                 {
          [1666952338.545136][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952338.545158][217377:217377] CHIP:DMG:                         {
          [1666952338.545176][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952338.545193][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952338.545212][217377:217377] CHIP:DMG:                                 {
          [1666952338.545233][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952338.545254][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952338.545278][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_FFFB,
          [1666952338.545306][217377:217377] CHIP:DMG:                                         ListIndex = Null,
          [1666952338.545328][217377:217377] CHIP:DMG:                                 }
          [1666952338.545351][217377:217377] CHIP:DMG:
          [1666952338.545374][217377:217377] CHIP:DMG:                                 Data = 65533,
          [1666952338.545391][217377:217377] CHIP:DMG:                         },
          [1666952338.545415][217377:217377] CHIP:DMG:
          [1666952338.545429][217377:217377] CHIP:DMG:                 },
          [1666952338.545454][217377:217377] CHIP:DMG:
          [1666952338.545468][217377:217377] CHIP:DMG:         ],
          [1666952338.545537][217377:217377] CHIP:DMG:
          [1666952338.545557][217377:217377] CHIP:DMG:         SuppressResponse = true,
          [1666952338.545576][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952338.545592][217377:217377] CHIP:DMG: }


          ./chip-tool actions  read action-list 1 1

          Verify read command is received on TH(all-clusters-minimal-app) Log

          [1666937311.802976][2651:2651] CHIP:EM: Handling via exchange: 38920r, Delegate: 0xaaaacd7f80e0
          [1666937311.803077][2651:2651] CHIP:IM: Received Read request
          [1666937311.803295][2651:2651] CHIP:DMG: ReadRequestMessage =
          [1666937311.803549][2651:2651] CHIP:DMG: {
          [1666937311.803611][2651:2651] CHIP:DMG:         AttributePathIBs =
          [1666937311.803678][2651:2651] CHIP:DMG:         [
          [1666937311.803739][2651:2651] CHIP:DMG:                 AttributePathIB =
          [1666937311.803841][2651:2651] CHIP:DMG:                 {
          [1666937311.803920][2651:2651] CHIP:DMG:                         Endpoint = 0x1,
          [1666937311.804008][2651:2651] CHIP:DMG:                         Cluster = 0x25,
          [1666937311.804120][2651:2651] CHIP:DMG:                         Attribute = 0x0000_0000,
          [1666937311.804204][2651:2651] CHIP:DMG:                 }
          [1666937311.804282][2651:2651] CHIP:DMG:
          [1666937311.804374][2651:2651] CHIP:DMG:         ],
          [1666937311.804446][2651:2651] CHIP:DMG:
          [1666937311.804539][2651:2651] CHIP:DMG:         isFabricFiltered = true,
          [1666937311.804603][2651:2651] CHIP:DMG:         InteractionModelRevision = 1
          [1666937311.804663][2651:2651] CHIP:DMG: },
          [1666937311.804852][2651:2651] CHIP:DMG: IM RH moving to [GeneratingReports]
          [1666937311.805117][2651:2651] CHIP:DMG: Building Reports for ReadHandler with LastReportGeneration = 0 DirtyGeneration = 0
          [1666937311.805190][2651:2651] CHIP:DMG: <RE:Run> Cluster 25, Attribute 0 is dirty
          [1666937311.805274][2651:2651] CHIP:DMG: Reading attribute: Cluster=0x0000_0025 Endpoint=1 AttributeId=0x0000_0000 (expanded=0)
          [1666937311.805343][2651:2651] CHIP:DMG: AccessControl: checking f=1 a=c s=0x000000000001B669 t= c=0x0000_0025 e=1 p=v
          [1666937311.805419][2651:2651] CHIP:DMG: AccessControl: allowed
          [1666937311.805533][2651:2651] CHIP:DMG: <RE> Sending report (payload has 36 bytes)...
          [1666937311.806139][2651:2651] CHIP:EM: <<< [E:38920r M:78085855 (Ack:55508733)] (S) Msg TX to 1:000000000001B669 [A6ED] --- Type 0001:05 (IM:ReportData)
          [1666937311.806241][2651:2651] CHIP:IN: (S) Sending msg 78085855 on secure session with LSID: 49558
          [1666937311.806996][2651:2651] CHIP:DMG: >> to UDP:[fe80::e65f:1ff:fe0e:be37%eth0]:38538 | 78085855 | [Interaction Model  (1) / Report Data (0x05) / Session = 20559 / Exchange = 38920]
          [1666937311.807095][2651:2651] CHIP:DMG: Header Flags =
          [1666937311.807154][2651:2651] CHIP:DMG: {
          [1666937311.807242][2651:2651] CHIP:DMG:     Exchange (0x06) =
          [1666937311.807300][2651:2651] CHIP:DMG:     {
          [1666937311.807359][2651:2651] CHIP:DMG:         AckMsg = 55508733
          [1666937311.807439][2651:2651] CHIP:DMG:         NeedsAck = true
          [1666937311.807493][2651:2651] CHIP:DMG:     }
          [1666937311.807566][2651:2651] CHIP:DMG: }
          [1666937311.807645][2651:2651] CHIP:DMG:
          [1666937311.807713][2651:2651] CHIP:DMG: Encrypted Payload (70 bytes) =
          [1666937311.807768][2651:2651] CHIP:DMG: {
          [1666937311.807847][2651:2651] CHIP:DMG:     data = 004f5000df7ea7040f921e0e13849a6fa0d777922f58d03152781bd36b6cbf9f22d882cc1c7c6d8afbd1b63303ffb3fb09c08e7160a33fb680d7f74a7696a47c4fe7b213b3cc
          [1666937311.807904][2651:2651] CHIP:DMG:     buffer_ptr = 187651028908208
          [1666937311.807958][2651:2651] CHIP:DMG: }
          [1666937311.808031][2651:2651] CHIP:DMG:
          [1666937311.808216][2651:2651] CHIP:DMG: ReportDataMessage =
          [1666937311.808282][2651:2651] CHIP:DMG: {
          [1666937311.808337][2651:2651] CHIP:DMG:         AttributeReportIBs =
          [1666937311.808413][2651:2651] CHIP:DMG:         [
          [1666937311.808503][2651:2651] CHIP:DMG:                 AttributeReportIB =
          [1666937311.808593][2651:2651] CHIP:DMG:                 {
          [1666937311.808664][2651:2651] CHIP:DMG:                         AttributeDataIB =
          [1666937311.808752][2651:2651] CHIP:DMG:                         {
          [1666937311.808842][2651:2651] CHIP:DMG:                                 DataVersion = 0x8d1127c2,
          [1666937311.808924][2651:2651] CHIP:DMG:                                 AttributePathIB =
          [1666937311.809007][2651:2651] CHIP:DMG:                                 {
          [1666937311.809101][2651:2651] CHIP:DMG:                                         Endpoint = 0x1,
          [1666937311.809201][2651:2651] CHIP:DMG:                                         Cluster = 0x25,
          [1666937311.809300][2651:2651] CHIP:DMG:                                         Attribute = 0x0000_0000,
          [1666937311.809384][2651:2651] CHIP:DMG:                                 }
          [1666937311.809481][2651:2651] CHIP:DMG:
          [1666937311.809573][2651:2651] CHIP:DMG:                                 Data = [
          [1666937311.809662][2651:2651] CHIP:DMG:
          [1666937311.809759][2651:2651] CHIP:DMG:                                 ],
          [1666937311.809840][2651:2651] CHIP:DMG:                         },
          [1666937311.809927][2651:2651] CHIP:DMG:
          [1666937311.809998][2651:2651] CHIP:DMG:                 },
          [1666937311.810080][2651:2651] CHIP:DMG:
          [1666937311.810140][2651:2651] CHIP:DMG:         ],

          ./chip-tool actions  read endpoint-lists  1 1

          Verify read command is received on TH(all-clusters-minimal-app)

          [1666952448.529080][217377:217377] CHIP:DMG: ReadRequestMessage =
          [1666952448.529101][217377:217377] CHIP:DMG: {
          [1666952448.529119][217377:217377] CHIP:DMG:         AttributePathIBs =
          [1666952448.529140][217377:217377] CHIP:DMG:         [
          [1666952448.529159][217377:217377] CHIP:DMG:                 AttributePathIB =
          [1666952448.529181][217377:217377] CHIP:DMG:                 {
          [1666952448.529204][217377:217377] CHIP:DMG:                         Endpoint = 0x1,
          [1666952448.529226][217377:217377] CHIP:DMG:                         Cluster = 0x25,
          [1666952448.529249][217377:217377] CHIP:DMG:                         Attribute = 0x0000_0001,
          [1666952448.529269][217377:217377] CHIP:DMG:                 }
          [1666952448.529293][217377:217377] CHIP:DMG:
          [1666952448.529312][217377:217377] CHIP:DMG:         ],
          [1666952448.529337][217377:217377] CHIP:DMG:
          [1666952448.529358][217377:217377] CHIP:DMG:         isFabricFiltered = true,
          [1666952448.529378][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952448.529396][217377:217377] CHIP:DMG: },
          [1666952448.529481][217377:217377] CHIP:DMG: IM RH moving to [GeneratingReports]
          [1666952448.529543][217377:217377] CHIP:DMG: Building Reports for ReadHandler with LastReportGeneration = 0 DirtyGeneration = 0
          [1666952448.529567][217377:217377] CHIP:DMG: <RE:Run> Cluster 25, Attribute 1 is dirty
          [1666952448.529586][217377:217377] CHIP:DMG: Reading attribute: Cluster=0x0000_0025 Endpoint=1 AttributeId=0x0000_0001 (expanded=0)
          [1666952448.529611][217377:217377] CHIP:DMG: AccessControl: checking f=1 a=c s=0x000000000001B669 t= c=0x0000_0025 e=1 p=v
          [1666952448.529639][217377:217377] CHIP:DMG: AccessControl: allowed
          [1666952448.529683][217377:217377] CHIP:DMG: <RE> Sending report (payload has 36 bytes)...
          [1666952448.530029][217377:217377] CHIP:EM: <<< [E:12078r M:26716965 (Ack:2683412)] (S) Msg TX to 1:000000000001B669 [AE59] --- Type 0001:05 (IM:ReportData)
          [1666952448.530072][217377:217377] CHIP:IN: (S) Sending msg 26716965 on secure session with LSID: 63115
          [1666952448.530509][217377:217377] CHIP:DMG: >> to UDP:[fe80::485c:bace:6107:3682%wlp3s0]:42342 | 26716965 | [Interaction Model  (1) / Report Data (0x05) / Session = 61304 / Exchange = 12078]
          [1666952448.530552][217377:217377] CHIP:DMG: Header Flags =
          [1666952448.530570][217377:217377] CHIP:DMG: {
          [1666952448.530612][217377:217377] CHIP:DMG:     Exchange (0x06) =
          [1666952448.530629][217377:217377] CHIP:DMG:     {
          [1666952448.530650][217377:217377] CHIP:DMG:         AckMsg = 2683412
          [1666952448.530668][217377:217377] CHIP:DMG:         NeedsAck = true
          [1666952448.530686][217377:217377] CHIP:DMG:     }
          [1666952448.530716][217377:217377] CHIP:DMG: }
          [1666952448.530733][217377:217377] CHIP:DMG:
          [1666952448.530759][217377:217377] CHIP:DMG: Encrypted Payload (70 bytes) =
          [1666952448.530776][217377:217377] CHIP:DMG: {
          [1666952448.530794][217377:217377] CHIP:DMG:     data = 0078ef0025ab9701cea6e79a67f3a56ad0dea23004bc0e516962a4b2eb578d9045f381e0f31b8f574047477e5e60aa969bed78d1b51470f9bb8760c4ad7c937f6a9746493426
          [1666952448.530814][217377:217377] CHIP:DMG:     buffer_ptr = 94384713812256
          [1666952448.530831][217377:217377] CHIP:DMG: }
          [1666952448.530848][217377:217377] CHIP:DMG:
          [1666952448.530880][217377:217377] CHIP:DMG: Decrypted Payload (36 bytes) =
          [1666952448.530897][217377:217377] CHIP:DMG: {
          [1666952448.530915][217377:217377] CHIP:DMG:     data = 1536011535012600e0b2edc5370124020124032524040118360218181818290424ff0118
          [1666952448.530934][217377:217377] CHIP:DMG: }
          [1666952448.530950][217377:217377] CHIP:DMG:
          [1666952448.531025][217377:217377] CHIP:DMG: ReportDataMessage =
          [1666952448.531046][217377:217377] CHIP:DMG: {
          [1666952448.531064][217377:217377] CHIP:DMG:         AttributeReportIBs =
          [1666952448.531445][217377:217377] CHIP:DMG:         [
          [1666952448.531532][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952448.531565][217377:217377] CHIP:DMG:                 {
          [1666952448.531585][217377:217377] CHIP:DMG:                         AttributeDataIB =
          [1666952448.531607][217377:217377] CHIP:DMG:                         {
          [1666952448.531630][217377:217377] CHIP:DMG:                                 DataVersion = 0xc5edb2e0,
          [1666952448.531652][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952448.531675][217377:217377] CHIP:DMG:                                 {
          [1666952448.531698][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952448.531722][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952448.531746][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_0001,
          [1666952448.531768][217377:217377] CHIP:DMG:                                 }
          [1666952448.531794][217377:217377] CHIP:DMG:
          [1666952448.531816][217377:217377] CHIP:DMG:                                 Data = [
          [1666952448.531839][217377:217377] CHIP:DMG:
          [1666952448.531868][217377:217377] CHIP:DMG:                                 ],
          [1666952448.531895][217377:217377] CHIP:DMG:                         },
          [1666952448.531925][217377:217377] CHIP:DMG:
          [1666952448.531951][217377:217377] CHIP:DMG:                 },
          [1666952448.531990][217377:217377] CHIP:DMG:
          [1666952448.532014][217377:217377] CHIP:DMG:         ],
          [1666952448.532047][217377:217377] CHIP:DMG:
          [1666952448.532069][217377:217377] CHIP:DMG:         SuppressResponse = true,
          [1666952448.532092][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952448.532111][217377:217377] CHIP:DMG: }
          [1666952448.532131][217377:217377] CHIP:DMG:
      cluster: "LogCommands"
      command: "UserPrompt"
      PICS: PICS_SKIP_SAMPLE_APP
      arguments:
          values:
              - name: "message"
                value: "Enter 'y' after success"
              - name: "expectedValue"
                value: "y"

    - label:
          "DUT reads all supported optional attributes from TH one at a time in
          a manufacturer specific order"
      verification: |
          Optional attibute

          ./chip-tool actions read setup-url 1 1

          Verify the Unsupported attribute on the TH(all-clusters-minnimal-app) Log

          [1666952609.343159][217377:217377] CHIP:DMG: ReadRequestMessage =
          [1666952609.343185][217377:217377] CHIP:DMG: {
          [1666952609.343205][217377:217377] CHIP:DMG:         AttributePathIBs =
          [1666952609.343228][217377:217377] CHIP:DMG:         [
          [1666952609.343248][217377:217377] CHIP:DMG:                 AttributePathIB =
          [1666952609.343272][217377:217377] CHIP:DMG:                 {
          [1666952609.343296][217377:217377] CHIP:DMG:                         Endpoint = 0x1,
          [1666952609.343319][217377:217377] CHIP:DMG:                         Cluster = 0x25,
          [1666952609.343344][217377:217377] CHIP:DMG:                         Attribute = 0x0000_0002,
          [1666952609.343366][217377:217377] CHIP:DMG:                 }
          [1666952609.343396][217377:217377] CHIP:DMG:
          [1666952609.343414][217377:217377] CHIP:DMG:         ],
          [1666952609.343437][217377:217377] CHIP:DMG:
          [1666952609.343456][217377:217377] CHIP:DMG:         isFabricFiltered = true,
          [1666952609.343474][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952609.343491][217377:217377] CHIP:DMG: },
          [1666952609.343573][217377:217377] CHIP:DMG: IM RH moving to [GeneratingReports]
          [1666952609.343647][217377:217377] CHIP:DMG: Building Reports for ReadHandler with LastReportGeneration = 0 DirtyGeneration = 0
          [1666952609.343671][217377:217377] CHIP:DMG: <RE:Run> Cluster 25, Attribute 2 is dirty
          [1666952609.343688][217377:217377] CHIP:DMG: Reading attribute: Cluster=0x0000_0025 Endpoint=1 AttributeId=0x0000_0002 (expanded=0)
          [1666952609.343733][217377:217377] CHIP:DMG: <RE> Sending report (payload has 33 bytes)...
          [1666952609.344066][217377:217377] CHIP:EM: <<< [E:37827r M:202875336 (Ack:199155625)] (S) Msg TX to 1:000000000001B669 [AE59] --- Type 0001:05 (IM:ReportData)
          [1666952609.344128][217377:217377] CHIP:IN: (S) Sending msg 202875336 on secure session with LSID: 63116
          [1666952609.344547][217377:217377] CHIP:DMG: >> to UDP:[fe80::485c:bace:6107:3682%wlp3s0]:46813 | 202875336 | [Interaction Model  (1) / Report Data (0x05) / Session = 20214 / Exchange = 37827]
          [1666952609.344601][217377:217377] CHIP:DMG: Header Flags =
          [1666952609.344623][217377:217377] CHIP:DMG: {
          [1666952609.344664][217377:217377] CHIP:DMG:     Exchange (0x06) =
          [1666952609.344681][217377:217377] CHIP:DMG:     {
          [1666952609.344703][217377:217377] CHIP:DMG:         AckMsg = 199155625
          [1666952609.344723][217377:217377] CHIP:DMG:         NeedsAck = true
          [1666952609.344741][217377:217377] CHIP:DMG:     }
          [1666952609.344770][217377:217377] CHIP:DMG: }
          [1666952609.344788][217377:217377] CHIP:DMG:
          [1666952609.344816][217377:217377] CHIP:DMG: Encrypted Payload (67 bytes) =
          [1666952609.344836][217377:217377] CHIP:DMG: {
          [1666952609.344856][217377:217377] CHIP:DMG:     data = 00f64e00c8a1170c0f5d4a4d9195a985ad54b3de870e336b0ecfaa7373615ca174138e2959606cb26476c70d8149a1435824f8e4446d9cc896de6c6d7b7275ea265d7c
          [1666952609.344878][217377:217377] CHIP:DMG:     buffer_ptr = 94384713812256
          [1666952609.344897][217377:217377] CHIP:DMG: }
          [1666952609.344915][217377:217377] CHIP:DMG:
          [1666952609.344947][217377:217377] CHIP:DMG: Decrypted Payload (33 bytes) =
          [1666952609.344967][217377:217377] CHIP:DMG: {
          [1666952609.344986][217377:217377] CHIP:DMG:     data = 153601153500370024020124032524040218350124008618181818290424ff0118
          [1666952609.345007][217377:217377] CHIP:DMG: }
          [1666952609.345024][217377:217377] CHIP:DMG:
          [1666952609.345097][217377:217377] CHIP:DMG: ReportDataMessage =
          [1666952609.345124][217377:217377] CHIP:DMG: {
          [1666952609.345144][217377:217377] CHIP:DMG:         AttributeReportIBs =
          [1666952609.345174][217377:217377] CHIP:DMG:         [
          [1666952609.345193][217377:217377] CHIP:DMG:                 AttributeReportIB =
          [1666952609.345224][217377:217377] CHIP:DMG:                 {
          [1666952609.345244][217377:217377] CHIP:DMG:                         AttributeStatusIB =
          [1666952609.345269][217377:217377] CHIP:DMG:                         {
          [1666952609.345290][217377:217377] CHIP:DMG:                                 AttributePathIB =
          [1666952609.345320][217377:217377] CHIP:DMG:                                 {
          [1666952609.345346][217377:217377] CHIP:DMG:                                         Endpoint = 0x1,
          [1666952609.345373][217377:217377] CHIP:DMG:                                         Cluster = 0x25,
          [1666952609.345403][217377:217377] CHIP:DMG:                                         Attribute = 0x0000_0002,
          [1666952609.345431][217377:217377] CHIP:DMG:                                 }
          [1666952609.345462][217377:217377] CHIP:DMG:
          [1666952609.345489][217377:217377] CHIP:DMG:                                 StatusIB =
          [1666952609.345519][217377:217377] CHIP:DMG:                                 {
          [1666952609.345543][217377:217377] CHIP:DMG:                                         status = 0x86 (UNSUPPORTED_ATTRIBUTE),
          [1666952609.345570][217377:217377] CHIP:DMG:                                 },
          [1666952609.345595][217377:217377] CHIP:DMG:
          [1666952609.345617][217377:217377] CHIP:DMG:                         },
          [1666952609.345647][217377:217377] CHIP:DMG:
          [1666952609.345668][217377:217377] CHIP:DMG:                 },
          [1666952609.345698][217377:217377] CHIP:DMG:
          [1666952609.345718][217377:217377] CHIP:DMG:         ],
          [1666952609.345750][217377:217377] CHIP:DMG:
          [1666952609.345771][217377:217377] CHIP:DMG:         SuppressResponse = true,
          [1666952609.345792][217377:217377] CHIP:DMG:         InteractionModelRevision = 1
          [1666952609.345811][217377:217377] CHIP:DMG: }
      cluster: "LogCommands"
      command: "UserPrompt"
      PICS: PICS_SKIP_SAMPLE_APP
      arguments:
          values:
              - name: "message"
                value: "Enter 'y' after success"
              - name: "expectedValue"
                value: "y"

    - label:
          "DUT writes a suitable value to all supported optional attributes on
          the TH one at a time in a manufacturer specific order"
      verification: |
          This cluster doesn't have any writable attributes
      cluster: "LogCommands"
      command: "UserPrompt"
      PICS: PICS_SKIP_SAMPLE_APP
      arguments:
          values:
              - name: "message"
                value: "Enter 'y' after success"
              - name: "expectedValue"
                value: "y"
