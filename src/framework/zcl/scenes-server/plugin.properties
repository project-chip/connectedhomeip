name=Scenes Server
category=ZCL
quality=development
qualityString=In development
description=Scenes Server

providedApis=zcl-scenes-server
api.zcl-scenes-server.header=scenes-server.h

requiredApis=coap,event,hal,stack,zcl-core,token

scenes-server.c

implementedCallbacks=chipZclClusterScenesServerCommandAddSceneRequestHandler,chipZclClusterScenesServerCommandViewSceneRequestHandler,chipZclClusterScenesServerCommandRemoveSceneRequestHandler,chipZclClusterScenesServerCommandRemoveAllScenesRequestHandler,chipZclClusterScenesServerCommandStoreSceneRequestHandler,chipZclClusterScenesServerCommandRecallSceneRequestHandler,chipZclClusterScenesServerCommandGetSceneMchipshipRequestHandler,chipZclClusterScenesServerCommandEnhancedAddSceneRequestHandler,chipZclClusterScenesServerCommandEnhancedViewSceneRequestHandler,chipZclClusterScenesServerCommandCopySceneRequestHandler

options=tableSize,nameSupport

tableSize.name=Scenes table size
tableSize.description=Maximum count of scenes across all endpoints
tableSize.type=NUMBER:1,255
tableSize.default=4

nameSupport.name=Support scene names
nameSupport.description=If this option is selected, the plugin will include support for scene names. Scene names will require additional space in the scene table (16 characters plus a length byte per entry).  The Name Support attribute will be set based on this option.
nameSupport.type=BOOLEAN
nameSupport.default=FALSE

setup(bookkeeping) {
  includes=CHIP_AF_API_ZCL_CORE,CHIP_AF_API_ZCL_SCENES_SERVER
  
  init=chZclScenesServerInitHandler
  
  provides=eraseScene,addScene,recallScene,storeScene,copyScene,viewScene,printInfoScene
  
  provides.eraseScene=void chZclEraseScene(uint8_t tableIdx)
  provides.eraseScene.0=chipZclEraseSceneCallback
  
  provides.addScene=bool chZclAddScene(ChipZclClusterId_t clusterId, uint8_t tableIdx, const uint8_t *sceneData, uint8_t length)
  provides.addScene.0=chipZclAddSceneCallback
  provides.addScene.type=or
  
  provides.recallScene=void chZclRecallScene(ChipZclEndpointId_t endpointId, uint8_t tableIdx, uint32_t transitionTime100mS)
  provides.recallScene.0=chipZclRecallSceneCallback
  
  provides.storeScene=void chZclStoreScene(ChipZclEndpointId_t endpointId, uint8_t tableIdx)
  provides.storeScene.0=chipZclStoreSceneCallback  

  provides.copyScene=void chZclCopyScene(uint8_t srcTableIdx, uint8_t dstTableIdx)  
  provides.copyScene.0=chipZclCopySceneCallback
  
  provides.viewScene=void chZclViewScene(uint8_t tableIdx, uint8_t **ppExtFldData)
  provides.viewScene.0=chipZclViewSceneCallback
  
  provides.printInfoScene=void chZclPrintInfoScene(uint8_t tableIdx)
  provides.printInfoScene.0=chipZclPrintInfoSceneCallback
}

setup(zclip) {
  provides: scenes,server
}

setup(token) {
  files=scenes-server-tokens.h
}

