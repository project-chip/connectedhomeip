environment:
    BUILD_TYPE: esp32-build
executor: esp32-build
steps:
    - checkout
    - run:
          name: Build example Echo App
          command: scripts/examples/esp_echo_app.sh
    - run:
          name: Preserve artifacts
          command: |
              mkdir -p example_binaries/esp32-build
              cp examples/wifi-echo/server/esp32/build/chip-wifi-echo.elf \
                 example_binaries/esp32-build/chip-wifi-echo.elf
    - run:
          name: Bloat check
          command: |
              scripts/helpers/bloat-check.sh   \
                  'Build Examples [ESP32]'     \
                  example_binaries/esp32-build \
                  master_binaries/esp32-build  \
                  bloat_report.txt
    - store_artifacts:
          path: example_binaries/esp32-build
    - store_artifacts:
          path: bloat_report.txt
